{"version":3,"file":"collect.esm.js","sources":["../src/constants.ts","../src/constants.export.ts","../src/utils/tests.ts","../node_modules/lodash.clonedeep/index.js","../src/utils/change.ts","../src/utils/StandinCollection.ts","../src/Collection.ts","../src/utils/Stopper.ts","../src/utils/Match.ts","../src/CompoundCollection.ts","../node_modules/lodash.tostring/index.js","../src/utils/compare.ts","../src/MapCollection.ts","../src/ScalarCollection.ts","../src/IntIndexedCollection.ts","../src/StringCollection.ts","../src/ArrayCollection.ts","../src/ObjectCollection.ts","../src/SetCollection.ts","../src/create.ts","../src/index.ts"],"sourcesContent":["export enum TypeEnum {\n  string = 'string',\n  number = 'number',\n  date = 'date',\n  null = 'null',\n  symbol = 'symbol',\n  any = 'any',\n  undefined = 'undefined',\n}\n\nexport enum FormEnum {\n  array = 'Array',\n  map = 'Map',\n  object = 'object',\n  set = 'set',\n  scalar = 'scalar',\n  function = 'function',\n  any = 'any',\n}\n\nexport type DefEnum = TypeEnum | FormEnum;\n\nexport enum booleanMode {\n  byValue = 'value',\n  byKey = 'key',\n  byBoth = 'both',\n}\n\nexport enum stopperEnum {\n  continue,\n  last, // process the return value, but stop iteration\n  stop, // do not process the return value - stop immediately\n}\n","const ABSENT = Symbol('ABSENT');\n\nexport { ABSENT }\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport {\n  DefEnum,\n  FormEnum,\n  TypeEnum\n} from '../constants';\nimport { ABSENT } from \"../constants.export\";\n\nexport function typeTest(type) {\n  return (value) => typeof value === type;\n}\n\nexport function isThere(item) {\n  return ![ABSENT, undefined].includes(item);\n}\n\n// isEmpty is NOT a simple syntactic inverse of isThere; it includes null,\n// which is not a qualifier of isThere.\nexport function isEmpty(item) {\n  return [ABSENT, null, undefined].includes(item);\n}\n\nexport const isNum = typeTest('number');\n\n/**\n * a type check; if nonEmpty = true, only true if array has indexed values.\n * @param a\n * @param nonEmpty\n * @returns {boolean}\n */\nexport function isArr(a, nonEmpty = false) {\n  return !!(Array.isArray(a) && (!nonEmpty || a.length));\n}\n\nexport const isMap = (m) => m instanceof Map;\n\n/**\n * returns true if the object is a POJO object -- that is,\n * its non-null, is an instance of Object, and is not an array.\n *\n * @param o\n * @param isAnyObj {boolean} whether arrays, maps should be included as objecg\n * @returns {boolean}\n */\nexport function isObj(o, isAnyObj = false) {\n  return o && typeof o === 'object' && (isAnyObj || !(isArr(o) || isMap(o)));\n}\n\nexport const isFn = typeTest('function');\n\nexport const isDate = (d) => d instanceof Date;\n\nexport const isSet = (d) => d instanceof Set;\n\nexport const isSymbol = typeTest('symbol');\n\nexport function isWhole(value) {\n  if (!isNum(value)) {\n    return false;\n  }\n  return value >= 0 && !(value % 2);\n}\n\n/**\n * returns a decorated error; an Error instance with extra annotations\n * @param err\n * @param notes\n */\nexport const e = (err, notes = {}) => {\n  if (typeof err === 'string') {\n    err = new Error(err);\n  }\n  if (!isThere(notes)) {\n    notes = {};\n  } else if (!isObj(notes)) {\n    notes = { notes };\n  }\n  return Object.assign(err, notes);\n};\n\nexport function isStr(s, nonEmpty = false) {\n  if (typeof s === 'string') {\n    return nonEmpty ? !!s : true;\n  }\n  return false;\n}\n\nexport const isUndefined = typeTest('undefined');\n\nexport const TESTS = [\n  { name: TypeEnum.undefined, test: isUndefined, isForm: false },\n  { name: FormEnum.map, test: isMap, isForm: true },\n  { name: TypeEnum.symbol, test: isSymbol, isForm: false },\n  { name: FormEnum.array, test: isArr, isForm: true },\n  { name: FormEnum.function, test: isFn, isForm: true },\n  { name: TypeEnum.date, test: isDate, isForm: false },\n  { name: FormEnum.set, test: isSet, isForm: true },\n  { name: FormEnum.object, test: isObj, isForm: true },\n  { name: TypeEnum.string, test: isStr, isForm: false },\n  { name: TypeEnum.number, test: isNum, isForm: false },\n  { name: FormEnum.scalar, test: () => true, isForm: true }\n];\n\n/**\n * detectForm is only concerned with containment patterns.\n * @param value\n */\nexport function detectForm(value: any): FormEnum {\n  for (let i = 0; i < TESTS.length; i += 1) {\n    const def = TESTS[i];\n    if (!def.isForm) {\n      continue;\n    }\n    if (def.test(value)) {\n      return def.name as FormEnum;\n    }\n  }\n\n  return FormEnum.scalar;\n}\n\nexport function formIsCompound(form: FormEnum) {\n  return [\n    FormEnum.map,\n    FormEnum.map,\n    FormEnum.array,\n    FormEnum.object,\n    FormEnum.set\n  ].includes(form);\n}\n\nexport function detectType(value: any) {\n  for (let i = 0; i < TESTS.length; i += 1) {\n    const def = TESTS[i];\n    if (def.isForm) {\n      continue;\n    }\n    try {\n      if (def.test(value)) {\n        return def.name;\n      }\n    } catch (err) {\n      console.log('error in def', def, err);\n    }\n  }\n\n  return detectForm(value) as DefEnum;\n}\n\n// const FIND_SYMBOL = /Symbol\\((.*:)?(.*)\\)/;\n\nexport function returnOrError(fn, ...args) {\n  if (typeof fn !== 'function') {\n    throw new Error('returnOrError MUST be passed a function');\n  }\n  try {\n    return fn(...args);\n  } catch (err) {\n    return err;\n  }\n}\n\n/**\n * allow custom form/type definitions by application developer;\n * @param name\n * @param test\n * @param isForm\n * @param order\n export function addTest(name, test, isForm = false, order = 0) {\n  TESTS.push(name, {name: name, test, isForm, order));\n}\n */\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","import cloneDeep from 'lodash.clonedeep';\nimport { detectForm, detectType, isThere } from './tests';\nimport {\n  DefEnum,\n  FormEnum,\n  TypeEnum\n} from '../constants';\nimport { ABSENT } from \"../constants.export\";\n\nexport const clone = cloneDeep;\n\nexport function makeEmpty(likeThis, type?: DefEnum) {\n  if (!isThere(type)) {\n    type = detectType(likeThis);\n  }\n  let out = likeThis;\n  switch (type) {\n    case TypeEnum.number:\n      out = 0;\n      break;\n\n    case TypeEnum.string:\n      out = '';\n      break;\n\n    case FormEnum.map:\n      out = new Map();\n      break;\n\n    case FormEnum.object:\n      out = {};\n      break;\n\n    case FormEnum.array:\n      out = [];\n      break;\n\n    case TypeEnum.date:\n      out = new Date();\n      break;\n\n    case FormEnum.set:\n      out = new Set();\n      break;\n\n    case TypeEnum.symbol:\n      out = Symbol('');\n      break;\n\n    default:\n      out = null;\n  }\n  return out;\n}\n\n/**\n * merge similar form\n * @param value\n * @param change\n * @param form\n */\nexport function amend(value, change, form: string | symbol = ABSENT) {\n  if (!isThere(form)) {\n    form = detectForm(value);\n  }\n  let out = value;\n  switch (form) {\n    case FormEnum.map:\n      out = new Map(value);\n      change.forEach((keyValue, key) => {\n        out.set(key, keyValue);\n      });\n      break;\n\n    case FormEnum.object:\n      out = { ...value };\n      Object.keys(change).forEach((key) => {\n        out[key] = change[key];\n      });\n      break;\n\n    case FormEnum.array:\n      out = [...value];\n      change.forEach((item, index) => {\n        out[index] = item;\n      });\n      break;\n\n    default:\n      console.warn('unhandled amend form:', form);\n  }\n  return out;\n}\n","import type {\n  collectionObj,\n  optionsObj,\n  filterAction,\n  iteratorMethods,\n  orderingFn,\n  reduceAction,\n} from '../types';\nimport { clone } from './change';\nimport { DefEnum, FormEnum } from \"../constants\";\n\nexport default class StandInCollection implements collectionObj<any, any, any> {\n  compItems = (a, b) => a === b;\n\n  compKeys = (a, b) => a === b;\n\n  withComp(fn) {\n    return fn();\n  }\n\n  public quiet = false;\n\n  constructor(store, options?: optionsObj) {\n    this.store = store;\n    if (options?.compKeys) {\n      this.compKeys = options?.compKeys;\n    }\n    if (options?.compItems) {\n      this.compItems = options?.compItems;\n    }\n    this.quiet = !!options?.quiet;\n  }\n\n  clear(): collectionObj<any, any, any> {\n    return this;\n  }\n\n  clone(newOptions?: optionsObj): collectionObj<any, any, any> {\n    return new StandInCollection(clone(this.store), newOptions);\n  }\n\n  cloneEmpty() {\n    return this\n  }\n\n  get c() {\n    return this.clone();\n  }\n\n  deleteKey(_key: any): collectionObj<any, any, any> {\n    return this;\n  }\n\n  deleteItem(_key: any): collectionObj<any, any, any> {\n    return this;\n  }\n\n  filter(_action: filterAction): collectionObj<any, any, any> {\n    return this;\n  }\n\n  forEach(_action: iteratorMethods): collectionObj<any, any, any> {\n    return this;\n  }\n\n  form: FormEnum = FormEnum.object;\n\n  get(_key: any): any {\n    return null;\n  }\n\n  hasItem(_item: any): boolean {\n    return false;\n  }\n\n  hasKey(_key: any): boolean {\n    return false;\n  }\n\n  items: any[] = [];\n\n  keyOf(_item: any): any {\n    return undefined;\n  }\n\n  keys: any[] = [];\n\n  map(_action: iteratorMethods): collectionObj<any, any, any> {\n    return this;\n  }\n\n  reduce(_action: reduceAction, _initial: any): any {\n    return null;\n  }\n\n  reduceC(_action: reduceAction, _initial: any): collectionObj<any, any, any> {\n    return this;\n  }\n\n  set(_key: any, _value: any): collectionObj<any, any, any> {\n    return this;\n  }\n\n  size = 0;\n\n  sort(_sorter: orderingFn | undefined): collectionObj<any, any, any> {\n    return this;\n  }\n\n  change(newStore) {\n    this.store = newStore;\n    return this;\n  }\n\n  store: any;\n\n  type: DefEnum = FormEnum.object;\n\n  // iterators\n\n  keyIter(): IterableIterator<any> {\n    return this.keys[Symbol.iterator]();\n  }\n\n  itemIter(): IterableIterator<any> {\n    return this.items[Symbol.iterator]();\n  }\n\n  storeIter() {\n    return this.store[Symbol.iterator]();\n  }\n  // prepend/append\n\n  addAfter(_item: any, _key?: number | undefined) {\n    return this;\n  }\n\n  addBefore(_item: any, _key?: number | undefined) {\n    return this;\n  }\n\n  first(_count?: number) {\n    return [];\n  }\n  last(_count?: number) {\n    return [];\n  }\n\n  get firstItem() {\n    return undefined;\n  }\n\n  get lastItem() {\n    return undefined;\n  }\n\n  removeLast(_count?: number) {\n    return this;\n  }\n\n  removeFirst(_count?: number) {\n    return this;\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport type {\n  optionsObj,\n  comparatorFn,\n  onChangeFn,\n  orderingFn,\n} from './types';\nimport {\n  detectForm,\n  detectType,\n  e,\n  isFn\n} from './utils/tests';\nimport { clone } from './utils/change';\nimport StandinCollection from './utils/StandinCollection';\nimport type { DefEnum, FormEnum } from \"./constants\";\n\nconst simpleComparator = (a, b) => a === b;\n\n// note - Collection is NOT compatible with the full collectionObj signature\nexport default abstract class Collection {\n  constructor(_store, options) {\n    // note - does NOT set store, as that should be done at the implementor level, for type reasons\n    if (options?.compKeys) {\n      this.compKeys = options?.compKeys || simpleComparator;\n    }\n    if (options?.compItems) {\n      this.compItems = options?.compItems || simpleComparator;\n    }\n    this.quiet = !!options?.quiet;\n  }\n\n  public onChange?: onChangeFn;\n\n  change(newStore) {\n    if (typeof newStore === 'function') {\n      try {\n        const cloned = clone(this.store);\n        let updated = newStore(cloned);\n        if (updated === undefined) {\n          updated = cloned;\n        }\n\n        if (updated === newStore) {\n          throw e('circular change', { newStore, target: this });\n        }\n\n        return this.change(updated);\n      } catch (err) {\n        throw e('functional newStore throws error:', {\n          err,\n          newStore,\n          target: this\n        });\n      }\n    }\n    const newType = detectType(newStore);\n    if (newType !== this.type) {\n      throw e('attempt to setStore different type than exists now', {\n        target: this,\n        newStore,\n        type: newType\n      });\n    }\n    return this.update(newStore, 'change');\n  }\n\n  protected update(newStore, source?: string, ...input) {\n    try {\n      if (!this.quiet && this.onChange && source) {\n        this.onChange(newStore, source, input);\n      }\n    } catch (err) {\n      console.warn('update: onChange error', err);\n      return this;\n    }\n    this._store = newStore;\n    return this;\n  }\n\n  protected sorter(sortFn?: orderingFn) {\n    return sortFn ? (a, b) => sortFn(a, b, this) : undefined;\n  }\n\n  get store(): any {\n    return this._store;\n  }\n\n  protected _store: any;\n\n  abstract get size(): number;\n\n  abstract get keys(): number[];\n\n  abstract get items(): any[];\n\n  // options and comparator\n\n  mergeOptions(mergeOptions?: optionsObj) {\n    if (!mergeOptions) {\n      return this.options;\n    }\n    return { ...this.options, ...mergeOptions };\n  }\n\n  get options() {\n    return {\n      quiet: this.quiet,\n      compKeys: this.compKeys,\n      compItems: this.compItems\n    };\n  }\n\n  public quiet = false;\n\n  protected _compKeys: comparatorFn = simpleComparator;\n\n  get compKeys(): comparatorFn {\n    return this._compKeys || simpleComparator;\n  }\n\n  set compKeys(value: comparatorFn) {\n    if (!isFn(value)) {\n      throw e('improper compKeys function', { target: this, fn: value });\n    }\n    this._compKeys = value;\n  }\n\n  protected _compItems: comparatorFn = simpleComparator;\n\n  get compItems(): comparatorFn {\n    return this._compItems || simpleComparator;\n  }\n\n  set compItems(value: comparatorFn) {\n    if (!isFn(value)) {\n      throw e('improper compItems function', { target: this, fn: value });\n    }\n    this._compItems = value;\n  }\n\n  get form(): FormEnum {\n    return detectForm(this._store);\n  }\n\n  get type(): DefEnum {\n    return detectType(this._store);\n  }\n\n  get c() {\n    return Collection.create(clone(this._store));\n  }\n\n  withComp(action, comp: optionsObj) {\n    let out = null;\n\n    const { compKeys, compItems } = this;\n    try {\n      if (comp.compKeys) {\n        this.compKeys = comp.compKeys;\n      }\n      if (comp.compItems) {\n        this.compItems = comp.compItems;\n      }\n      out = action();\n    } catch (err) {\n      this.compKeys = compKeys;\n      this.compItems = compItems;\n      throw err;\n    }\n\n    return out;\n  }\n\n  // must be overridden before any collections are created with a working create method\n  static create = (store, options?: optionsObj) => (\n    new StandinCollection(store, options)\n  );\n\n  abstract first(): any[];\n\n  abstract last(): any[];\n\n  get firstItem() {\n    if (!this.size) return undefined;\n    const [item] = this.first();\n    return item;\n  }\n\n  get lastItem() {\n    if (!this.size) return undefined;\n    const [item] = this.last();\n    return item;\n  }\n}\n","import type { StopperObj } from '../types';\nimport { stopperEnum } from \"../constants\";\n\nexport default class Stopper implements StopperObj {\n  public state = stopperEnum.continue;\n\n  get isActive() {\n    return this.state === stopperEnum.continue;\n  }\n\n  get isStopped() {\n    return this.state === stopperEnum.stop;\n  }\n\n  get isComplete() {\n    return this.state !== stopperEnum.continue;\n  }\n\n  get isLast() {\n    return this.state === stopperEnum.last;\n  }\n\n  // change methods\n\n  final() {\n    this.state = stopperEnum.last;\n  }\n\n  stop() {\n    // stop and DO NOT USE the last returned value\n    this.state = stopperEnum.stop;\n  }\n\n  stopAfterThis() {\n    this.final();\n  }\n}\n","import type { optionsObj } from '../types';\n\nexport default abstract class Match {\n  static sameKey(\n    key: any,\n    k2: any,\n    context: optionsObj,\n    many = true, // individually compare keys if arrays\n    debug = false\n  ) {\n    if (many && Array.isArray(k2)) {\n      return k2.some((otherSubKey) => {\n        const use = context?.compKeys\n          ? context.compKeys(key, otherSubKey)\n          : key === otherSubKey;\n        if (debug) {\n          console.log(\n            'MATCH subkey comparison: ',\n            otherSubKey,\n            'to first key',\n            key,\n            'result: ',\n            use\n          );\n        }\n        return use;\n      });\n    }\n    if (!context?.compKeys) {\n      return key === k2;\n    }\n    return context.compKeys(key, k2);\n  }\n\n  static sameItem(item: any, i2: any, context: optionsObj, many = true) {\n    if (!context?.compItems) {\n      return item === i2;\n    }\n    if (many && Array.isArray(i2)) {\n      return i2.some((otherSubItem) => {\n        let out = false;\n        if (context?.compItems) {\n          out = context.compItems(item, otherSubItem);\n        } else {\n          out = item === otherSubItem;\n        }\n        return out;\n      });\n    }\n    return context.compItems(item, i2);\n  }\n}\n","import Collection from './Collection';\nimport Stopper from './utils/Stopper';\nimport Match from './utils/Match';\nimport type {\n  filterAction,\n  iteratorMethods,\n  reduceAction,\n  collectionObj,\n  optionsObj,\n} from './types';\nimport { ABSENT } from \"./constants.export\";\n\nexport default abstract class CompoundCollection extends Collection {\n  get size() {\n    return this.store.size;\n  }\n\n  get keys(): any[] {\n    return this.store.keys();\n  }\n\n  get items(): any[] {\n    return this.store.values();\n  }\n\n  hasItem(item: any) {\n    return Array.from(this.items).some((storeItem) => (\n      Match.sameItem(storeItem, item, this)\n    ));\n  }\n\n  hasKey(key: any) {\n    if (this.store.has(key)) {\n      return true;\n    }\n    const iter = this.keyIter();\n    let done = false;\n    do {\n      const iterValue = iter.next();\n      done = !!iterValue.done;\n      if (done) {\n        break;\n      }\n      const storeKey = iterValue.value;\n      if (Match.sameKey(storeKey, key, this)) {\n        return true;\n      }\n    } while (!done);\n\n    return false;\n  }\n\n  set(key, item) {\n    let done = false;\n    const iter = this.keyIter();\n    do {\n      const iterValue = iter.next();\n      done = !!iterValue.done;\n      if (done) {\n        break;\n      }\n      const storeKey = iterValue.value;\n      if (Match.sameKey(storeKey, key, this)) {\n        this.store.set(storeKey, item);\n        return this;\n      }\n    } while (!done);\n    this.store.set(key, item);\n    return this;\n  }\n\n  get(key) {\n    return this.reduce((found, item, itemKey, _store, stopper) => {\n      if (Match.sameKey(itemKey, key, this)) {\n        stopper.final();\n        return item;\n      }\n      return found;\n    }, undefined);\n  }\n\n  keyOf(item): any | undefined {\n    const index = this.items.indexOf(item);\n    if (index === -1) {\n      return undefined;\n    }\n    return index;\n  }\n\n  deleteKey(key) {\n    this.store.delete(key);\n    return this;\n  }\n\n  deleteItem(item: any | any[]) {\n    return this.filter((oItem) => !Match.sameItem(oItem, item, this));\n  }\n\n  clear() {\n    this.store.clear();\n    return this;\n  }\n\n  filter(filterTest: filterAction) {\n    const tempC = this.cloneEmpty();\n\n    const stopper = new Stopper();\n\n    const iter = this.storeIter();\n\n    let done = false;\n    do {\n      const iterValue = iter.next();\n      done = !!iterValue.done;\n      if (done) {\n        break;\n      }\n      const [key, item] = iterValue.value;\n      const use = filterTest(item, key, this.store, stopper);\n      if (stopper.isStopped) {\n        break;\n      }\n      if (use) {\n        tempC.set(key, item);\n      }\n      if (stopper.isLast) {\n        break;\n      }\n    } while (!done);\n\n    this.update(tempC.store, 'filter', filterTest);\n    return this;\n  }\n\n  forEach(loop: iteratorMethods) {\n    const stopper = new Stopper();\n    const iter = this.storeIter();\n    let done = false;\n    while (!done) {\n      const iterValue = iter.next();\n      done = !!iterValue.done;\n      if (done) {\n        break;\n      }\n      const [key, item] = iterValue.value;\n      loop(item, key, this.store, stopper);\n      if (stopper.isComplete) {\n        break;\n      }\n    }\n\n    return this;\n  }\n\n  abstract clone(opts?: optionsObj): collectionObj<any, any, any>;\n  abstract cloneEmpty(options?: optionsObj): collectionObj<any, any, any>\n\n  map(loop: iteratorMethods) {\n    const stopper = new Stopper();\n    const iter = this.storeIter();\n\n    const nextMapCollection = this.cloneEmpty({ quiet: true });\n\n    let done = false;\n    while (!done) {\n      const iterValue = iter.next();\n      done = !!iterValue.done;\n      if (done) {\n        break;\n      }\n      const [key, keyItem] = iterValue.value;\n      const newItem = loop(keyItem, key, this.store, stopper);\n      if (stopper.isComplete) {\n        break;\n      }\n      nextMapCollection.set(key, newItem);\n      if (stopper.isComplete) {\n        break;\n      }\n    }\n    this.update(nextMapCollection.store, 'map', loop);\n\n    return this;\n  }\n\n  reduce(looper: reduceAction, initial?: any) {\n    const stopper = new Stopper();\n\n    let out = initial;\n    const iter = this.storeIter();\n    let done = false;\n    while (!done) {\n      const iterValue = iter.next();\n      done = !!iterValue.done;\n      if (done) {\n        break;\n      }\n      const [key, item] = iterValue.value;\n      const next = looper(out, item, key, this.store, stopper);\n      if (stopper.isStopped) {\n        return out;\n      }\n      out = next;\n      if (stopper.isComplete) {\n        return next;\n      }\n    }\n\n    return out;\n  }\n\n  // append\n\n  // assume that adding a value by key adds to the end of the item\n  addAfter(item: any, key: any = ABSENT) {\n    if (key === ABSENT) {\n      throw new Error('you must define a key to addAfter an item for a compound collection');\n    }\n    this.set(key, item);\n    return this\n  }\n\n  addBefore(item: any, key: any = ABSENT) {\n    if (key === ABSENT) {\n      throw new Error('you must define a key to addAfter an item for a compound collection');\n    }\n    const temp = this.cloneEmpty({ quiet: true });\n    temp.set(key, item);\n    this.forEach((fItem, fKey) => {\n      if (!this.compKeys(key, fKey)) {\n        temp.set(fKey, fItem);\n      }\n    });\n    this.update(temp.store, 'addBefore');\n    return this;\n  }\n\n  reduceC(action, start) {\n    const value = this.reduce(action, start);\n    return Collection.create(value);\n  }\n\n  removeFirst() {\n    const key = this.keys.shift();\n    const item = this.get(key);\n    this.deleteKey(key);\n    return item;\n  }\n\n  removeLast() {\n    const key = this.keys.pop();\n    const item = this.get(key);\n    this.deleteKey(key);\n    return item;\n  }\n\n  // iterators\n\n  abstract keyIter(fromIter?: boolean): IterableIterator<any>;\n\n  abstract itemIter(fromIter?: boolean): IterableIterator<any>;\n\n  abstract storeIter(fromIter?: boolean): IterableIterator<any>;\n\n  // first, last\n\n  first(count?: number) {\n    return Collection.create(this.items).first(count);\n  }\n\n  last(count?: number) {\n    return Collection.create(this.items).last(count);\n  }\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","import toString from 'lodash.tostring';\nimport { detectType, formIsCompound, isEmpty } from './tests';\nimport { DefEnum, FormEnum, TypeEnum } from '../constants';\n\nconst simpleTypeOrder: DefEnum[] = [\n  TypeEnum.undefined,\n  TypeEnum.null,\n  TypeEnum.number,\n  TypeEnum.string,\n];\n\nfunction compareTypes(a, b, typeA?: DefEnum, typeB?: DefEnum) {\n  if (!typeA) {\n    typeA = detectType(a);\n  }\n  if (!typeB) {\n    typeB = detectType(b);\n  }\n\n  if (typeA === TypeEnum.date) {\n    if (typeB === TypeEnum.date) {\n      return compareTypes(\n        (a as Date).getTime(),\n        (b as Date).getTime(),\n        TypeEnum.number,\n        TypeEnum.number\n      );\n    } else {\n      return compareTypes((a as Date).getTime(), b, TypeEnum.number, typeB);\n    }\n  } else if (typeB === TypeEnum.date) {\n    return compareTypes(a, (b as Date).getTime(), typeA, TypeEnum.number);\n  }\n\n  // order some types by type\n  if (typeA !== typeB) {\n    if (simpleTypeOrder.includes(typeA) && simpleTypeOrder.includes(typeB)) {\n      const diff = simpleTypeOrder.indexOf(typeA) - simpleTypeOrder.indexOf(typeB);\n      return diff / Math.abs(diff);\n    }\n  }\n\n  // compare numbers by value.\n  if (typeA === TypeEnum.number && typeB === TypeEnum.number) {\n    return (a - b) / Math.abs(a - b);\n  }\n\n  // compare strings by value;\n  // sort strings before non-strings\n  if (typeA === TypeEnum.string) {\n    if (typeB === TypeEnum.string) {\n      if (a > b) {\n        return 1;\n      }\n      return -1;\n    } else {\n      return -1;\n    }\n  } else if (typeB === TypeEnum.string) {\n    return 1;\n  }\n\n  /* eslint-disable no-else-return */\n  if (formIsCompound(typeA as FormEnum)) {\n    if (formIsCompound(typeB as FormEnum)) {\n      return compareTypes(\n        toString(a),\n        toString(b),\n        TypeEnum.string,\n        TypeEnum.string\n      );\n    } else {\n      return 1;\n    }\n  } else if (formIsCompound(typeB as FormEnum)) {\n    return compareTypes(a, toString(b), typeA, TypeEnum.string);\n  }\n\n  if (a > b) {\n    return 1;\n  }\n  return -1;\n}\n\n/**\n * the rule or the sort function is :\n * if the values are equal, return 0;\n * if (b > a) return 1; -- sort is b, a\n * if (a > b) return -1; -- sort is a, b\n * @param a\n * @param b\n */\nexport default function compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  if (isEmpty(a)) {\n    if (isEmpty(b)) {\n      return 0;\n      return -1;\n    }\n  } else if (isEmpty(b)) {\n    return 1;\n  }\n\n  return compareTypes(a, b);\n}\n","import CompoundCollection from './CompoundCollection';\nimport type { collectionObj, optionsObj, orderingFn } from './types';\nimport Match from './utils/Match';\nimport { clone } from './utils/change';\nimport compare from './utils/compare';\n\nexport default class MapCollection extends CompoundCollection\n  implements collectionObj<Map<any, any>, any, any> {\n  protected _store: Map<any, any>;\n\n  constructor(store: Map<any, any>, options?: optionsObj) {\n    super(store, options);\n    this.update(store, 'constructor', options);\n    this._store = store;\n  }\n\n  get(key) {\n    if (this._store.has(key)) {\n      return this._store.get(key);\n    }\n    return super.get(key);\n  }\n\n  get keys() {\n    return Array.from(this.store.keys());\n  }\n\n  get items() {\n    return Array.from(this.store.values());\n  }\n\n  clone(newOptions?: optionsObj) {\n    return new MapCollection(clone(this._store), this.mergeOptions(newOptions));\n  }\n\n  cloneEmpty() {\n    return new MapCollection((new Map()));\n  }\n\n  keyOf(item: any): any {\n    const key = undefined;\n\n    return this.reduce((foundKey, mItem, mKey, _store, iter) => {\n      if (Match.sameItem(mItem, item, this)) {\n        iter.final();\n        return mKey;\n      }\n      return foundKey;\n    }, key);\n  }\n\n  sort(sorter: orderingFn = compare): collectionObj<Map<any, any>, any, any> {\n    const map = new Map();\n    const sortedKeys = Array.from(this.keys).sort(this.sorter(sorter));\n    for (let i = 0; i < sortedKeys.length; i += 1) {\n      const key = sortedKeys[i];\n      map.set(key, this.store.get(key));\n    }\n    this.update(map, 'sort', sorter);\n    return this;\n  }\n\n  hasItem(item) {\n    return this.reduce((matches, mItem, _key, _store, iter) => {\n      if (Match.sameItem(mItem, item, this)) {\n        iter.final();\n        return true;\n      }\n      return matches;\n    }, false);\n  }\n\n  deleteKey(key) {\n    const map = new Map(this.store);\n    this.forEach((_item, storeKey, _store, stopper) => {\n      if (Match.sameKey(storeKey, key, this, Array.isArray(key))) {\n        map.delete(storeKey);\n        stopper.stop();\n      }\n    });\n    this.update(map, 'delete', key);\n    return this;\n  }\n\n  // iterators\n\n  keyIter(): IterableIterator<any> {\n    return this._store.keys();\n  }\n\n  itemIter(): IterableIterator<any> {\n    return this._store.values();\n  }\n\n  storeIter(): IterableIterator<any> {\n    return this._store.entries();\n  }\n}\n","import Collection from './Collection';\nimport { collectionObj, optionsObj, iteratorMethods, filterAction, reduceAction, orderingFn } from './types';\nimport { clone } from './utils';\n\nexport default class ScalarCollection extends Collection implements collectionObj<any, any, any> {\n  protected _store: any;\n\n  constructor(store: any, options?: optionsObj) {\n    super(store, options);\n    this._store = store;\n  }\n\n  get size() {\n    return 0;\n  }\n\n  get(_key) {\n    ScalarCollection.err('key');\n    return 0;\n  }\n\n  set(_key: any, _item) {\n    ScalarCollection.err('set');\n    return this;\n  }\n\n  hasKey(_item) {\n    ScalarCollection.err('hasKey');\n    return false;\n  }\n\n  hasItem(_item) {\n    ScalarCollection.err('hasItem');\n    return false;\n  }\n\n  keyOf(_item) {\n    ScalarCollection.err('keyOf');\n    return undefined;\n  }\n\n  static err(method) {\n    throw new Error(`${method} not available for scalar collection`);\n  }\n\n  get keys() {\n    ScalarCollection.err('keys');\n    return [];\n  }\n\n  get items() {\n    ScalarCollection.err('items');\n    return [];\n  }\n\n  deleteKey(_key) {\n    ScalarCollection.err('delete');\n    return this;\n  }\n\n  clear() {\n    this.update(undefined, 'clear');\n    return this;\n  }\n\n  forEach(_action: iteratorMethods) {\n    ScalarCollection.err('forEach');\n    return this;\n  }\n\n  map(_action: iteratorMethods) {\n    ScalarCollection.err('map');\n    return this;\n  }\n\n  reduce() {\n    ScalarCollection.err('reduce');\n    return null;\n  }\n\n  appendBefore(_item, _key?) {\n    ScalarCollection.err('reduce');\n    return null;\n  }\n\n  appendAfter(_item, _key?) {\n    ScalarCollection.err('reduce');\n    return null;\n  }\n\n  addAfter(_item: any, _key: any): collectionObj<any, any, any> {\n    ScalarCollection.err('addAfter');\n    return this;\n  }\n\n  removeLast(_count?: number) {\n    ScalarCollection.err('removeLast');\n    return this;\n  }\n\n  removeFirst(_count?: number) {\n    ScalarCollection.err('removeFirst');\n    return this;\n  }\n\n  addBefore(_item: any, _key: any): collectionObj<any, any, any> {\n    ScalarCollection.err('addAfter');\n    return this;\n  }\n\n  clone(opts?: optionsObj): collectionObj<any, any, any> {\n    return new ScalarCollection(clone(this.store), this.mergeOptions(opts));\n  }\n\n  cloneEmpty(opts?: optionsObj) {\n    return new ScalarCollection(undefined, this.mergeOptions(opts));\n  }\n\n  deleteItem(_item: any): collectionObj<any, any, any> {\n    ScalarCollection.err('deleteItem');\n    return this;\n  }\n\n  filter(_action: filterAction): collectionObj<any, any, any> {\n    ScalarCollection.err('filter');\n    return this;\n  }\n\n  itemIter(_fromIter: boolean | undefined): IterableIterator<any> {\n    ScalarCollection.err('itemIter');\n    return [].entries()\n  }\n\n  keyIter(_fromIter: boolean | undefined): IterableIterator<any> {\n    ScalarCollection.err('keyIter');\n    return [].entries()\n  }\n\n  reduceC(_action: reduceAction, _initial: any): collectionObj<any, any, any> {\n    ScalarCollection.err('reduceC');\n    return this;\n  }\n\n  sort(_sorter: orderingFn | undefined): collectionObj<any, any, any> {\n    ScalarCollection.err('sort');\n    return this;\n  }\n\n  storeIter(_fromIter: boolean | undefined): IterableIterator<[any, any]> {\n    ScalarCollection.err('keyIter');\n    return [].entries()\n  }\n\n  first(_count?: number) {\n    ScalarCollection.err('first');\n    return [];\n  }\n\n  last(_count?: number) {\n    ScalarCollection.err('last');\n    return [];\n  }\n\n\n}\n","import Collection from './Collection';\nimport Stopper from './utils/Stopper';\nimport type { iteratorMethods, reduceAction } from './types';\n\n/**\n * this is the base class for items in which the keys are not named strings but are\n * implicit order numbers - such as Arrays and the character indexes of strings.\n */\nexport default abstract class IntIndexedCollection extends Collection {\n\n  abstract get(_index: number): any;\n\n  get keys() {\n    const out: Array<number> = [];\n    for (let i = 0; i < this.size; i += 1) {\n      out.push(i);\n    }\n    return out;\n  }\n\n  forEach(action: iteratorMethods) {\n    const stopper = new Stopper();\n\n    const originalValue = this.store;\n    const items = this.items;\n    for (let i = 0; i < this.size; i += 1) {\n      action(items[i], i, originalValue, stopper);\n      if (stopper.isStopped) {\n        break;\n      }\n    }\n\n    return this;\n  }\n\n  map(looper) {\n    const stopper = new Stopper();\n    const newStore: any[] = [];\n    const iter = this.storeIter();\n    let done = false;\n    do {\n      const iterValue = iter.next();\n      done = iterValue.done;\n      if (done) {\n        break;\n      }\n      const [key, keyItem] = iterValue.value;\n      const item = looper(keyItem, key, this._store, stopper);\n      if (stopper.isStopped) {\n        break;\n      }\n      newStore[key] = item;\n      if (stopper.isComplete) {\n        break;\n      }\n    } while (!done);\n\n    this.update(newStore, 'map', looper);\n    return this;\n  }\n\n  reduce(looper: reduceAction, initial?: any): any {\n    const stopper = new Stopper();\n    const iter = this.storeIter();\n\n    let out = initial;\n    let done = false;\n    do {\n      const iterValue = iter.next();\n      done = iterValue.done;\n      if (done) {\n        break;\n      }\n      const [key, keyItem] = iterValue.value;\n      const next = looper(out, keyItem, key, this._store, stopper);\n      if (stopper.isStopped) {\n        break;\n      }\n      out = next;\n      if (stopper.isComplete) {\n        break;\n      }\n    } while (!done);\n    return out;\n  }\n\n  reduceC(looper, start) {\n    const out = this.reduce(looper, start);\n    return Collection.create(out);\n  }\n\n  // iterators\n\n  storeIter() {\n    return this._store.entries();\n  }\n\n  keyIter() {\n    return this._store.keys();\n  }\n\n  itemIter() {\n    return this._store.values();\n  }\n\n  // first, last\n\n  first(count?: number) {\n    if (!this.size) {\n      return [];\n    }\n   if (typeof count !== 'number') {\n     return [this.get(0)];\n   }\n\n   const out: any[] = [];\n   for(let i = 0; i < this.size && i < count; ++i) {\n     out.push(this.get(i));\n   }\n   return out;\n  }\n\n  last(count?: number) {\n    if (!this.size) {\n      return [];\n    }\n    if (typeof count !== 'number') {\n      return [this.get(0)];\n    }\n\n    const out: any[] = [];\n    for(let i = 0; i < this.size && i < count; ++i) {\n      const backIndex = this.size - i - 1;\n      out.push(this.get(backIndex));\n    }\n    return out;\n  }\n\n  get firstItem() {\n    if (!this.size) return undefined;\n    return this.get(0);\n  }\n  get lastItem() {\n    if (!this.size) return undefined;\n    return this.get(this.size -1);\n  }\n}\n","import type {\n  collectionObj,\n  optionsObj,\n  filterAction,\n  orderingFn\n} from './types';\nimport IntIndexedCollection from './IntIndexedCollection';\nimport Match from './utils/Match';\nimport Stopper from './utils/Stopper';\nimport Collection from './Collection';\nimport { booleanMode } from \"./constants\";\n\nexport default class StringCollection extends IntIndexedCollection\n  implements collectionObj<string, number, string> {\n  constructor(store: string, options?: optionsObj) {\n    super(store, options);\n    this._store = store;\n  }\n\n  // region inspection\n  get size() {\n    return this.store.length;\n  }\n\n  get items() {\n    return this.store.split('');\n  }\n\n  hasItem(str) {\n    if (str instanceof RegExp) {\n      return str.test(this.store);\n    }\n    return this.store.includes(str);\n  }\n\n  hasKey(i: number) {\n    if (i % 1) {\n      return false;\n    }\n    return i >= 0 && i < this.size;\n  }\n\n  keyOf(item: string) {\n    const indexOf = this.store.indexOf(item);\n    if (indexOf === -1) {\n      return undefined;\n    }\n    return indexOf;\n  }\n\n  // endregion\n\n  // region changes\n\n  /**\n   * acts like array.splice; inserts a string into/over part of the item;\n   * @param key\n   * @param item\n   */\n  set(key: number, item: string) {\n    const prefix = this.store.substring(0, key) || '';\n    const suffix = this.store.substring(key + Math.max(item.length, 1)) || '';\n    this.update(prefix + item + suffix, 'set', key, item);\n    return this;\n  }\n\n  get(key: number) {\n    if (key < 0 || key > this.size) {\n      return undefined;\n    }\n    return this.store.substring(key, key + 1);\n  }\n\n  deleteKey(key: number | Array<number>) {\n    if (Array.isArray(key)) {\n      return this.filter((_item, itemKey) => !Match.sameKey(itemKey, key, this));\n    }\n    return this.set(key, '');\n  }\n\n  deleteItem(\n    item: Array<string> | string\n  ): collectionObj<string, number, string> {\n    if (Array.isArray(item)) {\n      const cloned = this.clone({ quiet: true });\n      cloned.filter((otherItem) => !Match.sameItem(otherItem, item, this));\n      this.update(cloned.store, 'deleteItem', item);\n    }\n    let newStore: string = this.store;\n    let length = newStore.length;\n    do {\n      length = newStore.length;\n      newStore = newStore.replace(item as string, '');\n    } while (newStore && newStore.length < length);\n\n    this.update(newStore, 'deleteItem', item);\n    return this;\n  }\n\n  clear() {\n    this.update('', 'clear');\n    return this;\n  }\n\n  reverse(): collectionObj<string, number, string> {\n    return new StringCollection(this.items.reverse().join(''));\n  }\n\n  // note - this is the one version of sort where the item types are known to be 1-char strings\n  // so the default array sort works fine as a default\n  sort(sort?: orderingFn): collectionObj<string, number, string> {\n    const letters = Collection.create(\n      this.store.split(''),\n      this.mergeOptions({ quiet: true })\n    );\n    letters.sort(this.sorter(sort));\n    this.update(letters.store.join(''), 'sort', sort);\n    return this;\n  }\n\n  // endregion\n\n  // region iteration\n\n  // endregion\n\n  // region duplication\n\n  clone(options?: optionsObj) {\n    return new StringCollection(this.store, this.mergeOptions(options));\n  }\n\n  cloneEmpty(opts?: optionsObj) {\n    return new StringCollection('', this.mergeOptions(opts));\n  }\n\n  filter(filterTest: filterAction) {\n    const newStore = this.reduce((memo, letter, key, _original, stopper) => {\n      const use = filterTest(letter, key, this.store, stopper);\n      if (use && stopper.isActive) {\n        return `${memo}${letter}`;\n      }\n      return memo;\n    }, '');\n\n    this.update(newStore, 'filter', filterTest);\n    return this;\n  }\n\n  // endregion\n\n  // region boolean\n\n  difference(\n    itemsToRemove: collectionObj<any, any, any> | string | string[],\n    _mode: booleanMode = booleanMode.byKey\n  ): collectionObj<string, number, string> {\n    if (typeof itemsToRemove === 'string' || Array.isArray(itemsToRemove)) {\n      const next = new StringCollection(this.store);\n      next.deleteItem(itemsToRemove);\n      return next;\n    }\n    return this.difference(itemsToRemove.store);\n  }\n\n  union(\n    other: collectionObj<any, any, any> | string | string[],\n    _mode: booleanMode = booleanMode.byKey\n  ): collectionObj<string, number, string> {\n    if (typeof other === 'string') {\n      return this.union(other.split(''));\n    }\n    if (Array.isArray(other)) {\n      const chars = [...this.items, ...other];\n      const unique: string = chars.reduce((memo, char: string) => {\n        if (memo.includes(char)) {\n          return memo;\n        }\n        return memo + char;\n      }, '');\n      return new StringCollection(unique);\n    }\n    return this.union(other.store);\n  }\n\n  map(looper) {\n    const stopper = new Stopper();\n    const newStore: string[] = [];\n    const iter = this.storeIter();\n\n    let done = false;\n    do {\n      const iterValue = iter.next();\n      done = iterValue.done;\n      if (done) {\n        break;\n      }\n      const [key, keyItem] = iter.value;\n      const item = looper(keyItem, key, this._store, stopper);\n      if (stopper.isStopped) {\n        break;\n      }\n      newStore.push(item);\n      if (stopper.isComplete) {\n        break;\n      }\n    } while (!done);\n\n    this.update(newStore.join(''), 'map', looper);\n    return this;\n  }\n\n  intersection(\n    other: collectionObj<any, any, any> | string | string[]\n  ): collectionObj<string, number, string> {\n    if (typeof other === 'string') {\n      return this.intersection(other.split(''));\n    }\n    if (Array.isArray(other)) {\n      const unique: string[] = this.items.filter((char) => other.includes(char));\n      return new StringCollection(unique.join(''));\n    }\n    return this.intersection(other.items);\n  }\n\n  // endregion\n\n  storeIter() {\n    return this.items.entries();\n  }\n\n  keyIter() {\n    return this.keys[Symbol.iterator]();\n  }\n\n  itemIter() {\n    return this.items[Symbol.iterator]();\n  }\n\n  // append/prepend\n\n  addAfter(item, _key?: number | undefined) {\n    this.update(`${this.store}${item}`, 'addBefore');\n    return this;\n  }\n\n  addBefore(item, _key?: number | undefined) {\n    this.update(`${item}${this.store}`, 'addBefore');\n    return this;\n  }\n\n  removeFirst() {\n    const item = this.store.substring(0, 1);\n    const rest = this.store.substring(1);\n    this.update(rest, 'removeFirst');\n    return item;\n  }\n\n  removeLast() {\n    const item = this.store.substring(this.size - 1);\n    const rest = this.store.substring(0, this.size - 1);\n    this.update(rest, 'removeLast');\n    return item;\n  }\n\n  // first, last\n\n  first(count?: number) {\n    if (this.size && typeof count !== \"number\") {\n      return [this.store.substring(0, 1)];\n    }\n    return Collection.create(this.items).first(count);\n  }\n\n  last(count?: number) {\n    if (this.size && typeof count !== \"number\") {\n      return [this.store.substring(this.size - 1)];\n    }  return Collection.create(this.items).last(count);\n  }\n}\n","import IntIndexedCollection from './IntIndexedCollection';\nimport type { collectionObj, optionsObj, orderingFn } from './types';\nimport Stopper from './utils/Stopper';\nimport Match from './utils/Match';\nimport compare from './utils/compare';\n\nexport default class ArrayCollection extends IntIndexedCollection\n  implements collectionObj<any[], number, any> {\n  protected _store: any[];\n\n  constructor(store: any[], options?: optionsObj) {\n    super(store, options);\n    this.update(store, 'constructor');\n    this._store = store; // because typescript is a weak chump\n  }\n\n  get size() {\n    return this.store.length;\n  }\n\n  get items() {\n    return [...this.store];\n  }\n\n  get(key: number) {\n    return this.store[key];\n  }\n\n  set(key: number, item) {\n    const next = [...this.store];\n    next[key] = item;\n    this.update(next, 'set', key, item);\n    return this;\n  }\n\n  keyOf(item) {\n    let index = this.store.indexOf(item);\n    if (index === -1) {\n      index = undefined;\n    }\n    return index;\n  }\n\n  hasItem(item) {\n    return this.store.includes(item);\n  }\n\n  clear() {\n    this.update([], 'clear');\n    return this;\n  }\n\n  deleteKey(key: number | number[]) {\n    return this.filter((_item, oKey) => !Match.sameKey(oKey, key, this));\n  }\n\n  deleteItem(item: any | any[]) {\n    const newStore = this.store.filter((sItem) => !Match.sameItem(sItem, item, this));\n    this.update(newStore, 'deleteItem', item);\n    return this;\n  }\n\n  hasKey(key: number) {\n    return key >= 0 && key < this.size && !(key % 1);\n  }\n\n  sort(sortFn: orderingFn = compare) {\n    this.update(this.store.sort(this.sorter(sortFn)), 'sort', sortFn);\n    return this;\n  }\n\n  clone(newOptions?: optionsObj) {\n    return new ArrayCollection([...this.store], this.mergeOptions(newOptions));\n  }\n\n  cloneEmpty(newOptions?: optionsObj){\n    return new ArrayCollection([], this.mergeOptions(newOptions));\n  }\n\n  filter(filterTest) {\n    const stopper = new Stopper();\n    const newStore: any[] = [];\n    for (let i = 0; i < this.size; i += 1) {\n      const item = this.get(i);\n      const use = filterTest(item, i, this.store, stopper);\n      if (stopper.isStopped) {\n        break;\n      }\n      if (use) {\n        newStore.push(item);\n      }\n      if (stopper.isLast) {\n        break;\n      }\n    }\n    this.update(newStore, 'filter', filterTest);\n    return this;\n  }\n\n  // append/prepend\n\n  addAfter(item, _key?: number | undefined) {\n    this.update([...this.store, item], 'addBefore');\n    return this;\n  }\n\n  addBefore(item, _key?: number | undefined) {\n    this.update([item, ...this.store], 'addBefore');\n    return this;\n  }\n\n  removeFirst() : any {\n    const list = [...this.store];\n    const item = list.shift();\n    this.update(list, 'removeFirst');\n    return item;\n  }\n\n  removeLast() : any {\n    const list = [...this.store];\n    const item = list.pop();\n    this.update(list, 'removeFirst');\n    return item;\n  }\n\n  // first, last\n\n  first(count?: number) {\n    if (!count) return [this.store[0]];\n    return this.store.slice(0, count);\n  }\n\n  last(count?: number) {\n    if (!count) {\n      return [this.store[this.size - 1]];\n    }\n    return this.store.slice(-count);\n  }\n\n  get firstItem() {\n    if (!this.size) return undefined;\n    return this.store[0];\n  }\n\n  get lastItem() {\n    if (!this.size) return undefined;\n    return this.store[this.size -1];\n  }\n\n}\n","import CompoundCollection from './CompoundCollection';\nimport type { collectionObj, optionsObj, orderingFn } from './types';\nimport Match from './utils/Match';\nimport { clone } from './utils/change';\nimport compare from './utils/compare';\n\ntype obj = { [key: string]: any };\nexport default class ObjectCollection extends CompoundCollection\n  implements collectionObj<obj, any, any> {\n  protected _store: object;\n\n  constructor(store: object, options?: optionsObj) {\n    super(store, options);\n    this.update(store, 'constructor', options);\n    this._store = store;\n  }\n\n  get size() {\n    return Array.from(this.keys).length;\n  }\n\n  get keys() {\n    return Array.from(Object.keys(this.store));\n  }\n\n  get items() {\n    return Array.from(Object.values(this.store));\n  }\n\n  get(key) {\n    return this.store[key];\n  }\n\n  set(key: string, item) {\n    this._store[key] = item;\n    return this;\n  }\n\n  keyOf(item): string | undefined {\n    const keys = this.keys;\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      const oItem = this.get(key);\n      if (Match.sameItem(oItem, item, this)) {\n        return key;\n      }\n    }\n    return undefined;\n  }\n\n  hasItem(item) {\n    return this.items.some((oItem) => Match.sameItem(oItem, item, this));\n  }\n\n  hasKey(key) {\n    return this.keys.some((oKey) => Match.sameKey(oKey, key, this));\n  }\n\n  clear() {\n    this.update({}, 'clear');\n    return this;\n  }\n\n  deleteKey(key) {\n    const store = {...this.store};\n    delete store[key];\n    this.update(store, 'deleteKey', key);\n    return this;\n  }\n\n  // this is a little dicey but...\n  sort(sortFn: orderingFn = compare) {\n    const keyArray = Array.from(this.keys).sort(this.sorter(sortFn));\n    const newStore = {};\n    keyArray.forEach((key) => {\n      newStore[key] = this.get(key);\n    });\n\n    this.update(newStore, 'sort', sortFn);\n    return this;\n  }\n\n  clone(newOptions?: optionsObj) {\n    return new ObjectCollection(\n      clone(this._store),\n      this.mergeOptions(newOptions),\n    );\n  }\n  cloneEmpty(newOptions?: optionsObj) {\n    return new ObjectCollection(\n      {},\n      this.mergeOptions(newOptions),\n    );\n  }\n\n  // iterators\n\n  keyIter(): IterableIterator<any> {\n    return Object.keys(this.store)[Symbol.iterator]();\n  }\n\n  itemIter(): IterableIterator<any> {\n    return Object.values(this.store)[Symbol.iterator]();\n  }\n\n  storeIter(): IterableIterator<any> {\n    return Object.entries(this.store)[Symbol.iterator]();\n  }\n\n  // append/prepend\n\n  // assume that adding a value by key adds to the end of the item\n  addAfter(item: any, key?: string) {\n    if (key === undefined) {\n      throw new Error('you must define a key to addAfter an item for a compound collection');\n    }\n    this.set(String(key), item);\n    return this\n  }\n\n  addBefore(item: any, key?: string) {\n    if (key === undefined) {\n      throw new Error('you must define a key to addAfter an item for a compound collection');\n    }\n    const temp = this.cloneEmpty({quiet: true});\n\n    temp.set(String(key), item);\n    this.forEach((fItem, fKey) => {\n      if (!this.compKeys(key, fKey)) {\n        temp.set(fKey, fItem);\n      }\n    });\n    this.update(temp.store, 'addBefore');\n    return this;\n  }\n}\n","import Collection from './Collection';\nimport type {\n  collectionObj,\n  optionsObj,\n  filterAction,\n  orderingFn,\n  reduceAction,\n  iteratorMethods\n} from './types';\nimport Stopper from './utils/Stopper';\n\nexport default class SetCollection extends Collection\n  implements collectionObj<any, any, any> {\n  protected _store: Set<any>;\n\n  constructor(store, options?: optionsObj) {\n    super(store, options);\n    this._store = store;\n  }\n\n  clear() {\n    this.update(new Set(), 'clear');\n    return this;\n  }\n\n  clone(options?: optionsObj) {\n    return new SetCollection(new Set(this.store), this.mergeOptions(options));\n  }\n\n  deleteItem(item: any) {\n    const store = new Set(this._store);\n    store.delete(item);\n    this.update(store, 'deleteItem');\n    return this;\n  }\n\n  deleteKey(key: any) {\n    if (Array.isArray(key)) {\n      const store = this.reduce((memo, item, rKey) => {\n        if (!key.includes(rKey)) {\n          memo.add(item);\n        }\n        return memo;\n      }, new Set());\n      this.update(store, 'deleteKey');\n      return this;\n    }\n\n    if (this.hasKey(key)) {\n      const item = this.get(key);\n\n      const set = new Set(this._store);\n      set.delete(item);\n      this.update(set, 'deleteKey');\n    }\n    return this;\n  }\n\n  add(item) {\n    const store = new Set(this._store);\n    store.add(item);\n    return this.update(store, 'add');\n  }\n\n  filter(action: filterAction) {\n    const newSet = new Set(this._store);\n\n    this.forEach((item, key, store, stopper) => {\n      const use = action(item, key, store, stopper);\n      if (stopper.isActive && use) {\n        newSet.add(item);\n      }\n    });\n\n    this.update(newSet, 'filter');\n    return this;\n  }\n\n  forEach(action: iteratorMethods) {\n    const set = this.clone(this.mergeOptions({ quiet: true }));\n    const stopper = new Stopper();\n\n    const iter = set.storeIter();\n    let done = false;\n    do {\n      const iterValue = iter.next();\n      done = !! iterValue.done;\n      if (done) break;\n      const [iterKey, iterItem] = iterValue.value;\n      action(iterItem, iterKey, this.store, stopper);\n      if (!stopper.isActive) {\n        break;\n      }\n    } while (!done);\n\n    return this;\n  }\n\n  get(key: any): any {\n    if (this.size <= key) {\n      return undefined;\n    }\n    return this.items[key];\n  }\n\n  hasItem(item: any): boolean {\n    if (this.store.has(item)) {\n      return true;\n    }\n    return this.reduce((memo, value, _key, _store, stopper) => {\n      if (this.compItems(value, item)) {\n        stopper.final();\n        return true;\n      }\n      return memo;\n    }, false);\n  }\n\n  hasKey(key: any): boolean {\n    return typeof key === 'number' && this.size > key;\n  }\n\n  itemIter(): IterableIterator<any> {\n    return this.store.values();\n  }\n\n  keyIter(): IterableIterator<any> {\n    const keys: number[] = [];\n    for (let i = 0; i < this.size; i += 1) {\n      keys.push(i);\n    }\n    return Collection.create(keys).keyIter();\n  }\n\n  keyOf(item: any): any {\n    if (!this.hasItem(item)) {\n      return undefined;\n    }\n    return this.reduce((memo, reduceItem, key, _store, stopper) => {\n      if (this.compItems(item, reduceItem)) {\n        stopper.final();\n        return key;\n      }\n      return memo;\n    }, undefined);\n  }\n\n  map(action: iteratorMethods) {\n    const newItems = new Set();\n    this.forEach((item, key, _store, stopper) => {\n      const newItem = action(item, key, this.store, stopper);\n      if (stopper.isActive) {\n        newItems.add(newItem);\n      }\n    });\n    this.update(newItems, 'map');\n    return this;\n  }\n\n  reduce(action: reduceAction, initial: any): any {\n    const arrayStore = Collection.create(this.items, this.options);\n    const subAction = (memo, item, key, _store, stopper) => action(memo, item, key, this.store, stopper);\n    return arrayStore.reduce(subAction, initial);\n  }\n\n  reduceC(action: reduceAction, initial: any) {\n    return this.c.reduce(action, initial);\n  }\n\n  set(key: any, item: any) {\n    console.warn(\n      'set key/value has unpredictable results on a set collection; use add(item) for consistent results'\n    );\n    if (key > this.size) {\n      return this.add(item);\n    }\n    return this.map((mapItem, mapKey) => {\n      if (mapKey === key) {\n        return item;\n      }\n      return mapItem;\n    });\n  }\n\n  sort(sorter: orderingFn | undefined) {\n    const arrayOfItems = Collection.create(this.items, this.options);\n    arrayOfItems.sort(sorter);\n\n    this.update(new Set(arrayOfItems.store), 'sort');\n    return this;\n  }\n\n  storeIter(): IterableIterator<any> {\n    return Collection.create(this.items).storeIter();\n  }\n\n  get items(): any[] {\n    return Array.from(this.store.values());\n  }\n\n  get keys(): number[] {\n    const keys: any[] = [];\n    for (let i = 0; i < this.size; i += 1) keys.push(i);\n    return keys;\n  }\n\n  get size(): number {\n    return this.store.size;\n  }\n\n  // append/prepend\n\n  addAfter(item, _key?: number | undefined) {\n    const set = new Set(this.store);\n    set.add(item);\n    this.update(set, 'addBefore');\n    return this;\n  }\n\n  addBefore(item, _key?: number | undefined) {\n    const set = new Set([item, ...this.items.filter((other) => !this.compItems(other, item))]);\n    this.update(set, 'addBefore');\n    return this;\n  }\n\n  removeFirst() {\n    const set = new Set(this.store);\n    const item = this.keys.shift();\n    set.delete(item);\n    this.update(set, 'removeFirst');\n    return item;\n  }\n\n  removeLast() {\n    const set = new Set(this.store);\n    const item = this.keys.pop();\n    set.delete(item);\n    this.update(set, 'removeFirst');\n    return item;\n  }\n\n  cloneEmpty(options: optionsObj): collectionObj<any, any, any> {\n    return new SetCollection(new Set(), this.mergeOptions(options));\n  }\n\n  // first, last\n\n  first(count?: number) {\n    return Collection.create(this.items).first(count);\n  }\n\n  last(count?: number) {\n    return Collection.create(this.items).last(count);\n  }\n}\n","import { detectType } from './utils/tests';\nimport type { optionsObj } from './types';\nimport MapCollection from './MapCollection';\nimport ScalarCollection from './ScalarCollection';\nimport StringCollection from './StringCollection';\nimport ArrayCollection from './ArrayCollection';\nimport ObjectCollection from './ObjectCollection';\nimport SetCollection from './SetCollection';\nimport { FormEnum, TypeEnum } from './constants';\n\nexport default (store, options?: optionsObj) => {\n  let out;\n\n  switch (detectType(store)) {\n    case FormEnum.map:\n      out = new MapCollection(store, options);\n      break;\n\n    case TypeEnum.string:\n      out = new StringCollection(store, options);\n      break;\n\n    case FormEnum.array:\n      out = new ArrayCollection(store, options);\n      break;\n\n    case FormEnum.object:\n      out = new ObjectCollection(store, options);\n      break;\n\n    case FormEnum.set:\n      out = new SetCollection(store, options);\n      break;\n\n    default:\n      out = new ScalarCollection(store, options);\n  }\n\n  return out;\n};\n","import create from './create';\nimport Collection from './Collection';\nimport * as utils from './utils';\nimport * as constants from \"./constants.export\";\nimport * as enums from './constants';\nCollection.create = create;\nexport default create;\n\nexport { create, utils, constants, enums };\n"],"names":["TypeEnum","FormEnum","booleanMode","stopperEnum","ABSENT","Symbol","typeTest","type","value","isThere","item","undefined","includes","isEmpty","isNum","isArr","a","nonEmpty","Array","isArray","length","isMap","m","Map","isObj","o","isAnyObj","isFn","isSymbol","e","err","notes","Error","Object","assign","isUndefined","TESTS","name","test","isForm","map","symbol","array","function","date","d","Date","set","Set","object","string","s","number","scalar","detectForm","i","def","formIsCompound","form","detectType","console","log","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","boolTag","dateTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","global","freeSelf","self","root","Function","freeExports","exports","nodeType","freeModule","module","moduleExports","addMapEntry","pair","addSetEntry","add","arrayReduce","iteratee","accumulator","initAccum","index","isHostObject","result","toString","mapToArray","size","forEach","key","overArg","func","transform","arg","setToArray","uid","arrayProto","prototype","funcProto","objectProto","coreJsData","maskSrcKey","exec","keys","IE_PROTO","funcToString","hasOwnProperty","objectToString","reIsNative","RegExp","call","replace","Buffer","Uint8Array","getPrototype","getPrototypeOf","objectCreate","create","propertyIsEnumerable","splice","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","Promise","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","this","clear","entry","ListCache","MapCache","Stack","__data__","arrayLikeKeys","inherited","isObjectLike","isArrayLike","isArrayLikeObject","isArguments","n","baseTimes","String","skipIndexes","isIndex","push","assignValue","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","stack","isObject","constructor","input","initCloneArray","source","copyArray","tag","getTag","isFunc","buffer","slice","copy","cloneBuffer","isPrototype","proto","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","byteOffset","byteLength","cloneDataView","typedArray","cloneTypedArray","cloneMap","regexp","lastIndex","cloneRegExp","cloneSet","initCloneByTag","stacked","get","props","keysFunc","symbolsFunc","values","offset","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","baseIsNative","isFunction","arrayBuffer","newValue","getMapData","data","getValue","has","pop","hash","cache","pairs","LARGE_ARRAY_SIZE","other","ArrayBuffer","resolve","ctorString","isLength","baseKeys","clone","StandInCollection","store","options","compItems","b","compKeys","quiet","items","withComp","fn","newOptions","cloneEmpty","c","deleteKey","_key","deleteItem","filter","_action","hasItem","_item","hasKey","keyOf","reduce","_initial","reduceC","_value","sort","_sorter","change","newStore","keyIter","iterator","itemIter","storeIter","addAfter","addBefore","first","_count","last","firstItem","lastItem","removeLast","removeFirst","simpleComparator","Collection","_store","_compKeys","_compItems","cloned","updated","target","newType","update","onChange","warn","sorter","sortFn","mergeOptions","action","comp","out","StandinCollection","Stopper","state","continue","isActive","isStopped","stop","isComplete","isLast","final","stopAfterThis","Match","static","k2","context","many","debug","some","otherSubKey","use","i2","otherSubItem","CompoundCollection","from","storeItem","sameItem","iter","done","iterValue","next","storeKey","sameKey","found","itemKey","stopper","indexOf","delete","oItem","filterTest","tempC","loop","nextMapCollection","keyItem","newItem","looper","initial","temp","fItem","fKey","start","shift","count","symbolToString","baseToString","lodash_tostring","simpleTypeOrder","null","compareTypes","typeA","typeB","getTime","diff","Math","abs","compare","MapCollection","super","foundKey","mItem","mKey","sortedKeys","matches","keyValue","likeThis","ScalarCollection","method","appendBefore","appendAfter","opts","_fromIter","IntIndexedCollection","originalValue","backIndex","StringCollection","split","str","prefix","substring","suffix","max","otherItem","reverse","join","letters","memo","letter","_original","difference","itemsToRemove","_mode","byKey","union","unique","char","intersection","rest","ArrayCollection","oKey","sItem","list","ObjectCollection","keyArray","SetCollection","rKey","newSet","iterKey","iterItem","reduceItem","newItems","mapItem","mapKey","arrayOfItems"],"mappings":"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"}